<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>1ere promesse</title>
</head>

<body>
    <script>
        let i = 0;
        let eachPromise = setInterval(function () { // setInterval() pour éxécuter la fonction toutes les secondes
            const demarre = new Promise((resolve, reject) => { // je déclare une promesse avec param resolve qui correspond à la réussite de la promesse et 
                if (i < 10) {   // condition                   //  qui sera exécuté après le then et reject en cas d'erreur et l'éxécution interviendra au moment du catch
                    resolve('What a success');
                };
                    reject("Damn it's bigger than 10 so I reject this promise");

            }).then((success) => { // Alors // then ((sucess)) contient le message de resolve()
                i++ // j'incrément la variable i déclaré plus haut lors de succès de la promesse
                console.log(`${success} number ${i}`);

            }).catch((err) => { // Catch((err)) contient le message d'erreur de reject
                console.log(err);
                clearInterval(eachPromise); // je clear l'interval pour le stop quand il arrive au catch cad à l'echec de la promesse 
            });
        }, 400);
    </script>

</body>

</html>